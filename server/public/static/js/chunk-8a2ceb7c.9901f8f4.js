(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8a2ceb7c"],{"5a0c":function(t,e,r){!function(e,r){t.exports=r()}(0,(function(){"use strict";var t=1e3,e=6e4,r=36e5,n="millisecond",a="second",i="minute",s="hour",o="day",u="week",c="month",f="quarter",l="year",d="date",h="Invalid Date",x=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,p={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},v=function(t,e,r){var n=String(t);return!n||n.length>=e?t:""+Array(e+1-n.length).join(r)+t},g={s:v,z:function(t){var e=-t.utcOffset(),r=Math.abs(e),n=Math.floor(r/60),a=r%60;return(e<=0?"+":"-")+v(n,2,"0")+":"+v(a,2,"0")},m:function t(e,r){if(e.date()<r.date())return-t(r,e);var n=12*(r.year()-e.year())+(r.month()-e.month()),a=e.clone().add(n,c),i=r-a<0,s=e.clone().add(n+(i?-1:1),c);return+(-(n+(r-a)/(i?a-s:s-a))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:c,y:l,w:u,d:o,D:d,h:s,m:i,s:a,ms:n,Q:f}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},y="en",$={};$[y]=p;var w=function(t){return t instanceof S},D=function(t,e,r){var n;if(!t)return y;if("string"==typeof t)$[t]&&(n=t),e&&($[t]=e,n=t);else{var a=t.name;$[a]=t,n=a}return!r&&n&&(y=n),n||!r&&y},b=function(t,e){if(w(t))return t.clone();var r="object"==typeof e?e:{};return r.date=t,r.args=arguments,new S(r)},M=g;M.l=D,M.i=w,M.w=function(t,e){return b(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var S=function(){function p(t){this.$L=D(t.locale,null,!0),this.parse(t)}var v=p.prototype;return v.parse=function(t){this.$d=function(t){var e=t.date,r=t.utc;if(null===e)return new Date(NaN);if(M.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var n=e.match(x);if(n){var a=n[2]-1||0,i=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],a,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)):new Date(n[1],a,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},v.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},v.$utils=function(){return M},v.isValid=function(){return!(this.$d.toString()===h)},v.isSame=function(t,e){var r=b(t);return this.startOf(e)<=r&&r<=this.endOf(e)},v.isAfter=function(t,e){return b(t)<this.startOf(e)},v.isBefore=function(t,e){return this.endOf(e)<b(t)},v.$g=function(t,e,r){return M.u(t)?this[e]:this.set(r,t)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(t,e){var r=this,n=!!M.u(e)||e,f=M.p(t),h=function(t,e){var a=M.w(r.$u?Date.UTC(r.$y,e,t):new Date(r.$y,e,t),r);return n?a:a.endOf(o)},x=function(t,e){return M.w(r.toDate()[t].apply(r.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(e)),r)},m=this.$W,p=this.$M,v=this.$D,g="set"+(this.$u?"UTC":"");switch(f){case l:return n?h(1,0):h(31,11);case c:return n?h(1,p):h(0,p+1);case u:var y=this.$locale().weekStart||0,$=(m<y?m+7:m)-y;return h(n?v-$:v+(6-$),p);case o:case d:return x(g+"Hours",0);case s:return x(g+"Minutes",1);case i:return x(g+"Seconds",2);case a:return x(g+"Milliseconds",3);default:return this.clone()}},v.endOf=function(t){return this.startOf(t,!1)},v.$set=function(t,e){var r,u=M.p(t),f="set"+(this.$u?"UTC":""),h=(r={},r[o]=f+"Date",r[d]=f+"Date",r[c]=f+"Month",r[l]=f+"FullYear",r[s]=f+"Hours",r[i]=f+"Minutes",r[a]=f+"Seconds",r[n]=f+"Milliseconds",r)[u],x=u===o?this.$D+(e-this.$W):e;if(u===c||u===l){var m=this.clone().set(d,1);m.$d[h](x),m.init(),this.$d=m.set(d,Math.min(this.$D,m.daysInMonth())).$d}else h&&this.$d[h](x);return this.init(),this},v.set=function(t,e){return this.clone().$set(t,e)},v.get=function(t){return this[M.p(t)]()},v.add=function(n,f){var d,h=this;n=Number(n);var x=M.p(f),m=function(t){var e=b(h);return M.w(e.date(e.date()+Math.round(t*n)),h)};if(x===c)return this.set(c,this.$M+n);if(x===l)return this.set(l,this.$y+n);if(x===o)return m(1);if(x===u)return m(7);var p=(d={},d[i]=e,d[s]=r,d[a]=t,d)[x]||1,v=this.$d.getTime()+n*p;return M.w(v,this)},v.subtract=function(t,e){return this.add(-1*t,e)},v.format=function(t){var e=this,r=this.$locale();if(!this.isValid())return r.invalidDate||h;var n=t||"YYYY-MM-DDTHH:mm:ssZ",a=M.z(this),i=this.$H,s=this.$m,o=this.$M,u=r.weekdays,c=r.months,f=function(t,r,a,i){return t&&(t[r]||t(e,n))||a[r].substr(0,i)},l=function(t){return M.s(i%12||12,t,"0")},d=r.meridiem||function(t,e,r){var n=t<12?"AM":"PM";return r?n.toLowerCase():n},x={YY:String(this.$y).slice(-2),YYYY:this.$y,M:o+1,MM:M.s(o+1,2,"0"),MMM:f(r.monthsShort,o,c,3),MMMM:f(c,o),D:this.$D,DD:M.s(this.$D,2,"0"),d:String(this.$W),dd:f(r.weekdaysMin,this.$W,u,2),ddd:f(r.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(i),HH:M.s(i,2,"0"),h:l(1),hh:l(2),a:d(i,s,!0),A:d(i,s,!1),m:String(s),mm:M.s(s,2,"0"),s:String(this.$s),ss:M.s(this.$s,2,"0"),SSS:M.s(this.$ms,3,"0"),Z:a};return n.replace(m,(function(t,e){return e||x[t]||a.replace(":","")}))},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(n,d,h){var x,m=M.p(d),p=b(n),v=(p.utcOffset()-this.utcOffset())*e,g=this-p,y=M.m(this,p);return y=(x={},x[l]=y/12,x[c]=y,x[f]=y/3,x[u]=(g-v)/6048e5,x[o]=(g-v)/864e5,x[s]=g/r,x[i]=g/e,x[a]=g/t,x)[m]||g,h?y:M.a(y)},v.daysInMonth=function(){return this.endOf(c).$D},v.$locale=function(){return $[this.$L]},v.locale=function(t,e){if(!t)return this.$L;var r=this.clone(),n=D(t,e,!0);return n&&(r.$L=n),r},v.clone=function(){return M.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},p}(),T=S.prototype;return b.prototype=T,[["$ms",n],["$s",a],["$m",i],["$H",s],["$W",o],["$M",c],["$y",l],["$D",d]].forEach((function(t){T[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),b.extend=function(t,e){return t.$i||(t(e,S,b),t.$i=!0),b},b.locale=D,b.isDayjs=w,b.unix=function(t){return b(1e3*t)},b.en=$[y],b.Ls=$,b.p={},b}))},"5f0b":function(t,e,r){"use strict";r("ed83")},"99af":function(t,e,r){"use strict";var n=r("23e7"),a=r("da84"),i=r("d039"),s=r("e8b5"),o=r("861d"),u=r("7b0b"),c=r("07fa"),f=r("8418"),l=r("65f0"),d=r("1dde"),h=r("b622"),x=r("2d00"),m=h("isConcatSpreadable"),p=9007199254740991,v="Maximum allowed index exceeded",g=a.TypeError,y=x>=51||!i((function(){var t=[];return t[m]=!1,t.concat()[0]!==t})),$=d("concat"),w=function(t){if(!o(t))return!1;var e=t[m];return void 0!==e?!!e:s(t)},D=!y||!$;n({target:"Array",proto:!0,forced:D},{concat:function(t){var e,r,n,a,i,s=u(this),o=l(s,0),d=0;for(e=-1,n=arguments.length;e<n;e++)if(i=-1===e?s:arguments[e],w(i)){if(a=c(i),d+a>p)throw g(v);for(r=0;r<a;r++,d++)r in i&&f(o,d,i[r])}else{if(d>=p)throw g(v);f(o,d++,i)}return o.length=d,o}})},ed83:function(t,e,r){},eea3:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"apply-wrapper",style:{paddingTop:(t.active?0:140)+"px"}},[0===t.active?[r("div",{staticClass:"person-name"},[t._v("Hi~, "+t._s(t.formData.personName||"陌生人"))]),r("van-form",{on:{submit:t.onSubmit}},[r("van-field",{attrs:{readonly:"",clickable:"",required:"",name:"picker",label:"出差地点",placeholder:"请选择",value:t.formData.areaName,rules:[{required:!0}]},on:{click:function(e){t.showAreaPicker=!0}}}),r("van-popup",{attrs:{position:"bottom"},model:{value:t.showAreaPicker,callback:function(e){t.showAreaPicker=e},expression:"showAreaPicker"}},[r("van-picker",{attrs:{"show-toolbar":"",title:"出差地点",columns:t.areaColumns},on:{confirm:t.onAreaConfirm,cancel:function(e){t.showAreaPicker=!1}}})],1),r("van-field",{attrs:{readonly:"",clickable:"",required:"",name:"calendar",label:"出差时间",placeholder:"请选择日期",value:t.formatTime,rules:[{required:!0}]},on:{click:t.handelShowCalendar}}),r("van-field",{attrs:{rows:"2",autosize:"",required:"",label:"申请事由",type:"textarea",maxlength:"50",placeholder:"请填写","show-word-limit":"",rules:[{required:!0}]},model:{value:t.formData.reason,callback:function(e){t.$set(t.formData,"reason",e)},expression:"formData.reason"}}),r("van-calendar",{attrs:{type:"range"},on:{confirm:t.onCalendarConfirm},model:{value:t.showCalendar,callback:function(e){t.showCalendar=e},expression:"showCalendar"}}),r("div",{staticStyle:{margin:"16px 100px"}},[r("van-button",{attrs:{round:"",block:"",type:"info",disabled:t.submitDisabled,"native-type":"submit"}},[t._v("提交")])],1)],1)]:[r("van-dropdown-menu",{staticStyle:{margin:"0 -12px"}},[r("van-dropdown-item",{attrs:{options:t.dropdownOption},on:{change:t.handleDropDownChange},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}})],1),r("div",{staticClass:"record-wrapper"},t._l(t.recordList,(function(e,n){return r("van-card",{key:n,attrs:{title:"申请人："+e.personName,desc:"出差时间："+e.startTime+" ~ "+e.endTime+" 共"+t.computeTotalDay(e.startTime,e.endTime)+"天"},scopedSlots:t._u([{key:"tags",fn:function(){return[r("div",[t._v(" 出差地点："+t._s(e.areaName)+" ")]),r("div",{staticStyle:{width:"100%"}},[t._v(" 出差事由："+t._s(e.reason)+" ")]),r("van-tag",{staticStyle:{position:"absolute",right:"0",top:"0"},attrs:{type:3===e.status?"success":2===e.status?"danger":"warning"}},[t._v(t._s(3===e.status?"审批通过":2===e.status?"已拒绝":"未审批"))])]},proxy:!0}],null,!0)})})),1)],r("van-tabbar",{on:{change:t.handleTabbarChange},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[r("van-tabbar-item",{attrs:{icon:"guide-o"}},[t._v("出差申请")]),r("van-tabbar-item",{attrs:{icon:"search"}},[t._v("审批查询")])],1)],2)},a=[],i=r("1da1"),s=(r("96cf"),r("99af"),r("4de4"),r("d3b7"),r("5a0c")),o=r.n(s),u=[{text:"南京市",children:[{text:"市辖区"},{text:"玄武区"},{text:"秦淮区"},{text:"建邺区"},{text:"鼓楼区"},{text:"浦口区"},{text:"栖霞区"},{text:"雨花台区"},{text:"江宁区"},{text:"六合区"},{text:"溧水区"},{text:"高淳区"}]},{text:"无锡市",children:[{text:"市辖区"},{text:"锡山区"},{text:"惠山区"},{text:"滨湖区"},{text:"梁溪区"},{text:"新吴区"},{text:"江阴市"},{text:"宜兴市"}]},{text:"徐州市",children:[{text:"市辖区"},{text:"鼓楼区"},{text:"云龙区"},{text:"贾汪区"},{text:"铜山区"},{text:"丰县"},{text:"沛县"},{text:"睢宁县"},{text:"新沂市"},{text:"邳州市"}]},{text:"常州市",children:[{text:"市辖区"},{text:"天宁区"},{text:"钟楼区"},{text:"新北区"},{text:"武进区"},{text:"金坛区"},{text:"溧阳市"}]},{text:"苏州市",children:[{text:"市辖区"},{text:"虎丘区"},{text:"吴中区"},{text:"相城区"},{text:"姑苏区"},{text:"吴江区"},{text:"常熟市"},{text:"张家港市"},{text:"昆山市"},{text:"太仓市"}]},{text:"南通市",children:[{text:"市辖区"},{text:"崇川区"},{text:"港闸区"},{text:"通州区"},{text:"海安县"},{text:"如东县"},{text:"启东市"},{text:"如皋市"},{text:"海门市"}]},{text:"连云港市",children:[{text:"市辖区"},{text:"连云区"},{text:"海州区"},{text:"赣榆区"},{text:"东海县"},{text:"灌云县"},{text:"灌南县"}]},{text:"淮安市",children:[{text:"市辖区"},{text:"淮安区"},{text:"淮阴区"},{text:"清江浦区"},{text:"洪泽区"},{text:"涟水县"},{text:"盱眙县"},{text:"金湖县"}]},{text:"盐城市",children:[{text:"市辖区"},{text:"亭湖区"},{text:"盐都区"},{text:"大丰区"},{text:"响水县"},{text:"滨海县"},{text:"阜宁县"},{text:"射阳县"},{text:"建湖县"},{text:"东台市"}]},{text:"扬州市",children:[{text:"市辖区"},{text:"广陵区"},{text:"邗江区"},{text:"江都区"},{text:"宝应县"},{text:"仪征市"},{text:"高邮市"}]},{text:"镇江市",children:[{text:"市辖区"},{text:"京口区"},{text:"润州区"},{text:"丹徒区"},{text:"丹阳市"},{text:"扬中市"},{text:"句容市"}]},{text:"泰州市",children:[{text:"市辖区"},{text:"海陵区"},{text:"高港区"},{text:"姜堰区"},{text:"兴化市"},{text:"靖江市"},{text:"泰兴市"}]},{text:"宿迁市",children:[{text:"市辖区"},{text:"宿城区"},{text:"宿豫区"},{text:"沭阳县"},{text:"泗阳县"},{text:"泗洪县"}]}],c=r("365c"),f=r("2241"),l={name:"Apply",data:function(){return{usersData:[],greatLifeKey:"",formData:{personName:"",areaName:"",startTime:"",endTime:"",reason:""},showAreaPicker:!1,areaColumns:u,showCalendar:!1,calendarType:"start",recordList:[],active:0,showPopover:!1,searchKey:0,dropdownOption:[{text:"全部",value:0},{text:"已审批",value:1},{text:"未审批",value:2}]}},computed:{submitDisabled:function(){var t=!1;for(var e in this.formData)""===this.formData[e]&&(t=!0);return t},formatTime:function(){var t=this.formData,e=t.startTime,r=t.endTime,n=this.computeTotalDay(e,r);return this.formData.startTime&&this.formData.endTime?"".concat(e," ~ ").concat(r," 共").concat(n,"天"):""}},created:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getAllUsers();case 2:t.greatLifeKey=t.$route.query.greatLife||sessionStorage.getItem("greatLifeKey")||"",r=t.usersData.filter((function(e){return e.greatLifeKey===t.greatLifeKey})),t.greatLifeKey&&r.length?(t.formData.personName=r[0].userName,sessionStorage.setItem("greatLifeKey",t.greatLifeKey),t.queryTripRecord()):f["a"].alert({message:"您暂无申请权限！"});case 5:case"end":return e.stop()}}),e)})))()},methods:{getAllUsers:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c["b"])();case 3:r=e.sent,n=r.data,t.usersData=n.filter((function(t){return"superAdmin"!==t.greatLifeKey})),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log("getAllUsers",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},handelShowCalendar:function(){this.showCalendar=!0},onSubmit:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.formData.greatLifeKey=t.greatLifeKey,e.next=4,Object(c["a"])(t.formData);case 4:f["a"].alert({message:"您已成功添加一条出差记录！"}),t.formData.areaName="",t.formData.startTime="",t.formData.endTime="",t.formData.reason="",e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),console.log(e.t0,"onSubmit");case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))()},onAreaConfirm:function(t){"市辖区"===t[1]?this.formData.areaName=t[0]:this.formData.areaName=t[0]+"-"+t[1],this.showAreaPicker=!1},onCalendarConfirm:function(t){this.formData.startTime=o()(t[0]).format("YYYY/MM/DD"),this.formData.endTime=o()(t[1]).format("YYYY/MM/DD"),this.showCalendar=!1},computeTotalDay:function(t,e){return(new Date(e)-new Date(t))/864e5+1},queryTripRecord:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c["c"])({greatLifeKey:t.greatLifeKey,isAdmin:!1,status:0===t.searchKey?[1,2,3]:1===t.searchKey?[2,3]:[1]});case 3:r=e.sent,n=r.data,t.recordList=n,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log("queryTripRecord",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},handleTabbarChange:function(){1===this.active&&this.queryTripRecord()},handleDropDownChange:function(){this.queryTripRecord()}}},d=l,h=(r("5f0b"),r("2877")),x=Object(h["a"])(d,n,a,!1,null,"0e581254",null);e["default"]=x.exports}}]);
//# sourceMappingURL=chunk-8a2ceb7c.9901f8f4.js.map