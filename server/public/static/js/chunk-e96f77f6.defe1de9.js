(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e96f77f6"],{"08dd":function(e,t,n){e.exports=n.p+"static/img/empty-boy.595330e7.png"},1148:function(e,t,n){"use strict";var a=n("da84"),r=n("5926"),o=n("577e"),c=n("1d80"),i=a.RangeError;e.exports=function(e){var t=o(c(this)),n="",a=r(e);if(a<0||a==1/0)throw i("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(n+=t);return n}},"159b":function(e,t,n){var a=n("da84"),r=n("fdbc"),o=n("785a"),c=n("17c2"),i=n("9112"),u=function(e){if(e&&e.forEach!==c)try{i(e,"forEach",c)}catch(t){e.forEach=c}};for(var s in r)r[s]&&u(a[s]&&a[s].prototype);u(o)},"17c2":function(e,t,n){"use strict";var a=n("b727").forEach,r=n("a640"),o=r("forEach");e.exports=o?[].forEach:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}},"1dde":function(e,t,n){var a=n("d039"),r=n("b622"),o=n("2d00"),c=r("species");e.exports=function(e){return o>=51||!a((function(){var t=[],n=t.constructor={};return n[c]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"408a":function(e,t,n){var a=n("e330");e.exports=a(1..valueOf)},"4de4":function(e,t,n){"use strict";var a=n("23e7"),r=n("b727").filter,o=n("1dde"),c=o("filter");a({target:"Array",proto:!0,forced:!c},{filter:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},5530:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n("b64b"),n("a4d3"),n("4de4"),n("d3b7"),n("e439"),n("159b"),n("dbb4");function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},"5d06":function(e,t,n){},6606:function(e,t,n){"use strict";n("ce88")},"6fc1":function(e,t,n){"use strict";n("5d06")},a640:function(e,t,n){"use strict";var a=n("d039");e.exports=function(e,t){var n=[][e];return!!n&&a((function(){n.call(null,t||function(){throw 1},1)}))}},aa6a:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"title",rawName:"v-title"}],class:{"map-wrapper":!0,"empty-state":!e.withinTimeRange},attrs:{"data-title":"渠道经理考勤系统"}},[e.withinTimeRange?[a("van-field",{attrs:{"left-icon":"location-o",label:"当前位置",readonly:""},model:{value:e.location,callback:function(t){e.location=t},expression:"location"}}),a("div",{staticClass:"map-container"},[a("BmMap",{on:{ready:e.handleMapReady}})],1),a("van-field",{attrs:{maxlength:12,label:"姓名",readonly:"","left-icon":"user-o",placeholder:"请选择",value:e.currentUser.userName,rules:[{required:!0}]},on:{click:function(t){e.showUserPicker=!0}}}),a("van-field",{attrs:{rows:"2","left-icon":"chat-o",autosize:"",required:"",label:"备注信息",type:"textarea",maxlength:"50",placeholder:"请说明现所在渠道机构","show-word-limit":""},model:{value:e.noteMessage,callback:function(t){e.noteMessage=t},expression:"noteMessage"}}),a("van-field",{attrs:{name:"uploader",label:"考勤照片","left-icon":"upgrade",required:""},scopedSlots:e._u([{key:"input",fn:function(){return[a("van-uploader",{attrs:{capture:"camera","after-read":e.afterRead,"max-count":1},on:{delete:e.handleDeleteImage},model:{value:e.uploadPicList,callback:function(t){e.uploadPicList=t},expression:"uploadPicList"}})]},proxy:!0}],null,!1,1734455288)}),a("div",{staticStyle:{margin:"16px 100px"}},[a("van-button",{attrs:{type:"primary",loading:e.submitLoading,"loading-text":"正在打卡，请稍候...",round:"",block:"",disabled:e.isSuccess},on:{click:e.handleSubmit}},[e._v(e._s(e.isSuccess?"打卡成功!":"打卡"))])],1)]:a("van-empty",{attrs:{image:n("08dd"),description:"侠哥儿提醒您：当前时间不在打卡范围内，请在 09:10 之前及 16:00~17:00 之间进行打卡哟~"}})],2)},r=[],o=n("5530"),c=n("1da1"),i=(n("e9c4"),n("96cf"),n("2241")),u=n("365c"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"container"}})},l=[],f=(n("d3b7"),n("ed09"));window.mapInstance=null;var p=Object(f["c"])({name:"BmMap",setup:function(e,t){var n=t.emit,a=function(){return new Promise((function(e,t){if("undefined"!==typeof window.BMap)return e(window.BMap),!0;window.onBMapCallback=function(){e(window.BMap)};var n=document.createElement("script");n.type="text/javascript",n.src="//api.map.baidu.com/api?type=webgl&v=2.0&ak=FAcKnbIiHn82T2n0Y3itGv3ESNVcmOzv&callback=onBMapCallback",document.body.appendChild(n),n.onerror=t}))},r=function(){mapInstance=new window.BMapGL.Map("container");var e=new window.BMapGL.Point(116.404,39.915);mapInstance.centerAndZoom(e,17),mapInstance.enableScrollWheelZoom(),n("ready",{mapInstance:mapInstance})};a().then((function(){r()}))}}),d=p,b=(n("6fc1"),n("2877")),v=Object(b["a"])(d,s,l,!1,null,"1d108a9e",null),m=v.exports,g=(n("b680"),n("f564")),w=function(){var e=Object(f["d"])({center:{lng:116.404,lat:39.915},zoom:15,location:""}),t=function(){navigator.geolocation.getCurrentPosition((function(t){var a=t.coords,r=a.longitude,o=a.latitude;e.center={lng:r.toFixed(6),lat:o.toFixed(6)},n(e.center)}),(function(e){switch(e.code){case e.PERMISSION_DENIED:Object(g["a"])({type:"warning",message:"获取位置信息失败！请确保GPS正常开启"});break;case e.POSITION_UNAVAILABLE:Object(g["a"])({type:"warning",message:"位置信息不可用"});break;case e.TIMEOUT:Object(g["a"])({type:"warning",message:"请求用户地理位置超时"});break;case e.UNKNOWN_ERROR:Object(g["a"])({type:"warning",message:"未知错误"});break}}))},n=function(e){var t=e.lng,n=e.lat,r=1,o=5,c=new BMapGL.Convertor,i=new BMapGL.Point(t,n),u=[];u.push(i),c.translate(u,r,o,a)},a=function(e){0===e.status&&(e.points[0],r(e.points[0]),o(e.points[0]),c(e.points[0],250),mapInstance.setCenter(e.points[0]))},r=function(t){var n=t.lng,a=t.lat,r=new BMapGL.Geocoder,o=new BMapGL.Point(n,a);r.getLocation(o,(function(t){e.location=t.address}))},o=function(e){var t=e.lng,n=e.lat,a=new BMapGL.Marker(new BMapGL.Point(t,n));mapInstance.addOverlay(a)},c=function(e,t){var n=e.lng,a=e.lat,r=new BMapGL.Circle(new BMapGL.Point(n,a),t,{fillColor:"blue",strokeWeight:1,fillOpacity:.3,strokeOpacity:.3});mapInstance.addOverlay(r)};return{mapData:e,getLocation:t}},h=n("ed08"),O=Object(f["c"])({name:"Attendance",components:{BmMap:m},setup:function(e,t){var n=t.root,a=Object(f["a"])((function(){return Object(h["d"])("00:00:00","09:10:00")||Object(h["d"])("16:00:00","18:00:00")})),r=w(),s=r.mapData,l=r.getLocation,p=function(){l()},d=Object(f["e"])(""),b=Object(f["e"])([]),v=Object(f["e"])(""),m=Object(f["e"])(!1),g=Object(f["e"])(!1),O=n.$store.getters.userInfo,y=function(e){e.status="uploading",e.message="上传中...",j(e)},j=function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,n=new FormData,n.append("pic",t.file),e.next=5,u["l"](n);case 5:a=e.sent,r=a.data,t.status="success",t.message="",v.value=r,e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](0),t.status="failed",t.message="上传失败, 请重新上传";case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){b.value=[],v.value=""},k=function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(d.value){e.next=3;break}return i["a"].alert({message:"请填写所在机构！"}),e.abrupt("return");case 3:if(v.value){e.next=6;break}return i["a"].alert({message:"请先上传考勤照片！"}),e.abrupt("return");case 6:return t={faceUrl:v.value,userName:O.userName,userId:O.userId,location:s.location,center:JSON.stringify(s.center),message:d.value},e.prev=7,m.value=!0,e.next=11,u["b"](t);case 11:m.value=!1,i["a"].alert({message:"打卡成功！"}).then((function(){g.value=!0})),e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](7),m.value=!1;case 18:case"end":return e.stop()}}),e,null,[[7,15]])})));return function(){return e.apply(this,arguments)}}();return Object(o["a"])(Object(o["a"])({currentUser:O,withinTimeRange:a},Object(f["f"])(s)),{},{handleMapReady:p,noteMessage:d,afterRead:y,uploadPicList:b,handleDeleteImage:x,handleSubmit:k,submitLoading:m,isSuccess:g})}}),y=O,j=(n("6606"),Object(b["a"])(y,a,r,!1,null,"649b7f19",null));t["default"]=j.exports},b680:function(e,t,n){"use strict";var a=n("23e7"),r=n("da84"),o=n("e330"),c=n("5926"),i=n("408a"),u=n("1148"),s=n("d039"),l=r.RangeError,f=r.String,p=Math.floor,d=o(u),b=o("".slice),v=o(1..toFixed),m=function(e,t,n){return 0===t?n:t%2===1?m(e,t-1,n*e):m(e*e,t/2,n)},g=function(e){var t=0,n=e;while(n>=4096)t+=12,n/=4096;while(n>=2)t+=1,n/=2;return t},w=function(e,t,n){var a=-1,r=n;while(++a<6)r+=t*e[a],e[a]=r%1e7,r=p(r/1e7)},h=function(e,t){var n=6,a=0;while(--n>=0)a+=e[n],e[n]=p(a/t),a=a%t*1e7},O=function(e){var t=6,n="";while(--t>=0)if(""!==n||0===t||0!==e[t]){var a=f(e[t]);n=""===n?a:n+d("0",7-a.length)+a}return n},y=s((function(){return"0.000"!==v(8e-5,3)||"1"!==v(.9,0)||"1.25"!==v(1.255,2)||"1000000000000000128"!==v(0xde0b6b3a7640080,0)}))||!s((function(){v({})}));a({target:"Number",proto:!0,forced:y},{toFixed:function(e){var t,n,a,r,o=i(this),u=c(e),s=[0,0,0,0,0,0],p="",v="0";if(u<0||u>20)throw l("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return f(o);if(o<0&&(p="-",o=-o),o>1e-21)if(t=g(o*m(2,69,1))-69,n=t<0?o*m(2,-t,1):o/m(2,t,1),n*=4503599627370496,t=52-t,t>0){w(s,0,n),a=u;while(a>=7)w(s,1e7,0),a-=7;w(s,m(10,a,1),0),a=t-1;while(a>=23)h(s,1<<23),a-=23;h(s,1<<a),w(s,1,1),h(s,2),v=O(s)}else w(s,0,n),w(s,1<<-t,0),v=O(s)+d("0",u);return u>0?(r=v.length,v=p+(r<=u?"0."+d("0",u-r)+v:b(v,0,r-u)+"."+b(v,r-u))):v=p+v,v}})},ce88:function(e,t,n){},dbb4:function(e,t,n){var a=n("23e7"),r=n("83ab"),o=n("56ef"),c=n("fc6a"),i=n("06cf"),u=n("8418");a({target:"Object",stat:!0,sham:!r},{getOwnPropertyDescriptors:function(e){var t,n,a=c(e),r=i.f,s=o(a),l={},f=0;while(s.length>f)n=r(a,t=s[f++]),void 0!==n&&u(l,t,n);return l}})},e439:function(e,t,n){var a=n("23e7"),r=n("d039"),o=n("fc6a"),c=n("06cf").f,i=n("83ab"),u=r((function(){c(1)})),s=!i||u;a({target:"Object",stat:!0,forced:s,sham:!i},{getOwnPropertyDescriptor:function(e,t){return c(o(e),t)}})}}]);