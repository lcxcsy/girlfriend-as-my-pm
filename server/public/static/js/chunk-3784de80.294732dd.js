(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3784de80"],{"1dde":function(e,t,r){var n=r("d039"),a=r("b622"),c=r("2d00"),s=a("species");e.exports=function(e){return c>=51||!n((function(){var t=[],r=t.constructor={};return r[s]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"387c":function(e,t,r){e.exports=r.p+"static/img/empty-data.c141e6ff.png"},"46ff":function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r("1da1"),a=(r("99af"),r("96cf"),r("2241")),c=r("d399"),s=r("365c"),o=r("ed09"),i=function(){var e=Object(o["d"])({areaName:"",startTime:"",endTime:"",reason:""}),t=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s["a"](t);case 3:a["a"].alert({message:"您已成功添加一条出差记录！"}),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),console.log(e.t0,"addTripRecord");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),r=function(){e.areaName="",e.startTime="",e.endTime="",e.reason=""},i=Object(o["e"])([]),u=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s["i"](t);case 3:r=e.sent,n=r.data,i.value=null!==n&&void 0!==n&&n.length?n:[],e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log("getTripRecords",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s["j"](t);case 3:c["a"].success("处理成功！"),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),console.log("updateTripRecord",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),l=function(e,t){if(e&&t){var r=(new Date(t).getTime()-new Date(e).getTime())/864e5+1;return"".concat(e," ~ ").concat(t," 共").concat(r,"天")}return""};return{recordsList:i,formData:e,addTripRecord:t,getTripRecords:u,handleReset:r,handleApplyForm:d,getDateDuration:l}}},6771:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"title",rawName:"v-title"}],staticClass:"page-wrapper",attrs:{"data-title":"渠道经理出差审批系统"}},[n("div",{class:{"records-content":!0,"empty-state":!e.recordsList.length}},[e.recordsList.length?n("van-divider",{attrs:{"content-position":"left"}},[e._v(e._s(0===e.currentStatus?"您有"+e.recordsList.length+"条消息待审批":"您一共审批完"+e.recordsList.length+"条申请"))]):e._e(),e.recordsList.length?e._l(e.recordsList,(function(t,r){return n("van-card",{key:r,attrs:{title:"申请人员："+t.userName,desc:"出差时间："+e.getDateDuration(t.startTime,t.endTime)},scopedSlots:e._u([{key:"tags",fn:function(){return[n("div",{staticClass:"van-card__desc van-ellipsis"},[e._v(" 出差地点："+e._s(t.areaName)+" ")]),n("div",{staticClass:"van-card__desc van-ellipsis"},[e._v(" 出差事由："+e._s(t.reason)+" ")]),[2,3].includes(t.status)?n("van-tag",{staticStyle:{position:"absolute",right:"0",top:"0"},attrs:{type:3===t.status?"success":"danger"}},[e._v(" "+e._s(3===t.status?"审批通过":"已拒绝")+" ")]):e._e()]},proxy:!0},1===t.status?{key:"footer",fn:function(){return[n("van-button",{staticStyle:{position:"absolute",left:"10px"},attrs:{size:"small",type:"danger"},on:{click:function(r){return e.handleDealApplication(2,t.recordId,t.userName)}}},[e._v(" 拒绝 ")]),n("van-button",{attrs:{size:"small",type:"primary"},on:{click:function(r){return e.handleDealApplication(3,t.recordId,t.userName)}}},[e._v("通过")])]},proxy:!0}:null],null,!0)})})):n("van-empty",{attrs:{image:r("387c"),description:"所有申请已审批完成，记得休息一下哟"}})],2),n("van-tabbar",{on:{change:e.getRecords},model:{value:e.currentStatus,callback:function(t){e.currentStatus=t},expression:"currentStatus"}},[0===e.currentStatus&&e.recordsList.length?n("van-tabbar-item",{attrs:{icon:"records",dot:""}},[e._v("未审批")]):n("van-tabbar-item",{attrs:{icon:"records"}},[e._v("未审批")]),n("van-tabbar-item",{attrs:{icon:"good-job-o"}},[e._v("已审批")])],1)],1)},a=[],c=r("1da1"),s=(r("96cf"),r("99af"),r("2241")),o=r("46ff"),i=r("ed09"),u=Object(i["c"])({name:"BusinessTripApproval",setup:function(){var e=Object(i["e"])(0),t=Object(o["a"])(),r=t.recordsList,n=t.getTripRecords,a=t.getDateDuration,u=t.handleApplyForm,d=function(){n({status:e.value?[2,3]:[1]})};d();var l=function(e,t,r){s["a"].confirm({message:"是否".concat(3==e?"通过":"驳回"," ").concat(r," 的出差申请？")}).then(Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,u({status:e,recordId:t});case 2:d();case 3:case"end":return r.stop()}}),r)}))))};return{currentStatus:e,recordsList:r,getDateDuration:a,getRecords:d,handleDealApplication:l}}}),d=u,l=(r("6981"),r("2877")),p=Object(l["a"])(d,n,a,!1,null,"01855984",null);t["default"]=p.exports},6981:function(e,t,r){"use strict";r("a524")},"99af":function(e,t,r){"use strict";var n=r("23e7"),a=r("da84"),c=r("d039"),s=r("e8b5"),o=r("861d"),i=r("7b0b"),u=r("07fa"),d=r("8418"),l=r("65f0"),p=r("1dde"),f=r("b622"),v=r("2d00"),m=f("isConcatSpreadable"),g=9007199254740991,h="Maximum allowed index exceeded",b=a.TypeError,w=v>=51||!c((function(){var e=[];return e[m]=!1,e.concat()[0]!==e})),_=p("concat"),y=function(e){if(!o(e))return!1;var t=e[m];return void 0!==t?!!t:s(e)},x=!w||!_;n({target:"Array",proto:!0,arity:1,forced:x},{concat:function(e){var t,r,n,a,c,s=i(this),o=l(s,0),p=0;for(t=-1,n=arguments.length;t<n;t++)if(c=-1===t?s:arguments[t],y(c)){if(a=u(c),p+a>g)throw b(h);for(r=0;r<a;r++,p++)r in c&&d(o,p,c[r])}else{if(p>=g)throw b(h);d(o,p++,c)}return o.length=p,o}})},a524:function(e,t,r){}}]);